console.log("\n %c Bearsimple v1.9.9 %c https://github.com/whitebearcode/typecho-bearsimple \n","color: #fadfa3; background: #030307; padding:5px 0;","background: #fadfa3; padding:5px 0;");(function($){$.fn.extend({BsOptions:function(option){setting=$.extend(option);getThis=this.prop("className")!==""?"."+this.prop("className"):this.prop("id")!==""?"#"+this.prop("id"):this.prop("nodeName");window.onload=function(){if(document.documentElement.scrollHeight<=document.documentElement.clientHeight){var bodyTag=document.getElementsByTagName('body')[0];bodyTag.style.height=document.documentElement.clientWidth/screen.width*screen.height+'px';}setTimeout(function(){window.scrollTo(0,1)},0);};if(setting.readprocess=='true'){document.addEventListener('DOMContentLoaded',function(){var winHeight=window.innerHeight,docHeight=document.documentElement.scrollHeight,progressBar=document.querySelector('#read_progress');progressBar.max=docHeight-winHeight;progressBar.value=window.scrollY;document.addEventListener('scroll',function(){progressBar.max=document.documentElement.scrollHeight-window.innerHeight;progressBar.value=window.scrollY;});});}if(setting.pjax=='2'||setting.pjax==null){clickToHref();function clickToHref(){var eles=document.querySelectorAll("div[hrefs]");eles.forEach(function(item){item.addEventListener("click",function(){var href=item.getAttribute("hrefs");var target=item.getAttribute("target");if(!target){location.href=href;}else{window.open(href,target);}});})}if(setting.search>0){clickToHref2();function clickToHref2(){var eles=document.querySelectorAll("i[hrefx]");eles.forEach(function(item){item.addEventListener("click",function(){var href=item.getAttribute("hrefx");var target=item.getAttribute("target");var header=setting.header_search;var phone=setting.phone_search;var sidebar=setting.sidebar_search;if(header=='true'){var header_value=document.getElementById("pcsearch").value;}else{var header_value='';}if(phone=='true'){var phone_value=document.getElementById("phonesearch").value;}else{var phone_value='';}if(sidebar=='true'){var sidebar_value=document.getElementById("sidebarsearch").value;}else{var sidebar_value='';}if(!target){location.href=href+header_value+phone_value+sidebar_value;}else{window.open(href,target);}});})}}}if(setting.slider=='true'){$.getScript("//deliver.application.pub/npm/@splidejs/splide@2.4.21/dist/js/splide.min.js",function(){var div=document.getElementsByTagName('div');for(var i=0;i<div.length;i++){if(div[i].className=='splide'){var splide=new Splide('.splide',{type:'slide',rewind:true,autoplay:true,});splide.mount();}}});}if(setting.menu_style=='2'){$(function(){var $mainMenuState=$('#main-menu-state');if($mainMenuState.length){$mainMenuState.change(function(e){var $menu=$('#main-menu');if(this.checked){$menu.hide().slideDown(450,function(){$menu.css('display','');});}else{$menu.show().slideUp(450,function(){$menu.css('display','');});}});$(window).on('beforeunload unload',function(){if($mainMenuState[0].checked){$mainMenuState[0].click();}});}});$.getScript(setting.import+"assets/js/new-menu.min.js",function(){$('#main-menu').smartmenus({mainMenuSubOffsetX:-1,mainMenuSubOffsetY:4,subMenusSubOffsetX:6,subMenusSubOffsetY:-6});});}$.getScript("//cdn.staticfile.org/lazysizes/5.3.2/lazysizes.min.js");$.getScript("//cdn.staticfile.org/gsap/3.9.1/gsap.min.js",function(){$.getScript("//cdn.staticfile.org/gsap/3.9.1/ScrollTrigger.min.js",function(){gsap.registerPlugin(ScrollTrigger);gsap.utils.toArray(".text-highlight").forEach((highlight)=>{ScrollTrigger.create({trigger:highlight,start:"-100px center",onEnter:()=>highlight.classList.add("active"),});});const setHighlightStyle=(value)=>document.body.setAttribute("data-highlight",value);setHighlightStyle("half");});});if(setting.sticky=='true'){$.getScript(setting.import+"assets/js/sticky.min.js",function(){var elements=document.querySelectorAll('.sidebar');Stickyfill.add(elements);});}if(setting.imagebox=='true'){$.getScript("//cdn.staticfile.org/viewerjs/1.10.2/viewer.min.js",function(){const gallery=new Viewer(document.getElementById('bearsimple-images'));const gallery2=new Viewer(document.getElementById('bearsimple-images-readmode'));});}if(setting.Watermark=='true'){if(setting.WatermarkType=='1'||setting.WatermarkType==''){if(setting.waterMarkOutput!=='null'||setting.waterMarkOutput!==''){$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({textBg:setting.Watermark_textBg,textColor:setting.Watermark_textColor,text:setting.Watermark_text,textWidth:setting.Watermark_textWidth,textSize:setting.Watermark_textSize,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,outputType:setting.Watermark_outputType});});}else{$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({textBg:setting.Watermark_textBg,textColor:setting.Watermark_textColor,text:setting.Watermark_text,textWidth:setting.Watermark_textWidth,textSize:setting.Watermark_textSize,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,});});}}else{if(setting.waterMarkOutput!=='null'||setting.waterMarkOutput!==''){$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({path:setting.Watermark_path,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,outputType:setting.Watermark_outputType});});}else{$.getScript(setting.import+"assets/js/bearmark.min.js",function(){$('.bearmark').watermark({path:setting.Watermark_path,gravity:setting.Watermark_gravity,opacity:setting.Watermark_opacity,margin:setting.Watermark_margin,});});}}}if(setting.Popup=='true'){function setCookie(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*1000));var expires="expires="+d.toGMTString();document.cookie=cname+"="+cvalue+"; "+expires;}function getCookie(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i].trim();if(c.indexOf(name)==0){return c.substring(name.length,c.length);}}return"";}function checkCookie(){var users=getCookie("bear");if(users!=""){}else{layer.open({type:1,title:false,closeBtn:false,area:'300px;',shadeClose:true,shade:0.8,anim:4,id:'layanc',resize:false,btn:['查看','取消'],btnAlign:'c',moveType:1,content:'<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">'+setting.PopupText+'</div>',success:function(layero){var btn=layero.find('.layui-layer-btn');btn.find('.layui-layer-btn0').attr({href:setting.PopupUrl,target:'_blank'});}});setCookie("bear","popup",86400);}}checkCookie();}if(setting.Top=='true'){$.getScript(setting.import+"assets/js/Top.js",function(){$('#js-go_top').gotoTop({offset:500,speed:300,animationShow:{'transform':'translate(0,0)','transition':'transform .5s ease-in-out'},animationHide:{'transform':'translate(80px,0)','transition':'transform .5s ease-in-out'}});});}if(setting.scroll=='true'){$.getScript(setting.import+"assets/scroll/scroll.min.js");$.getScript(setting.import+"assets/scroll/scrollnav.min.js",function(){var bearsimplescroll=document.querySelector('#bearsimple-scroll');var articlenav=document.querySelector('#article-nav');scrollnav.init(bearsimplescroll,{insertTarget:articlenav,});});}$.getScript("//cdn.staticfile.org/semantic-ui/2.4.1/semantic.min.js",function(){$('.ui.star.rating').rating();$('.ui.heart.rating').rating();$('.ui.accordion').accordion();$('.message .close').on('click',function(){$(this).closest('.message').transition('fade');});$('i').popup();$('button').popup();$('.ui.dropdown').dropdown({on:'hover',});$("body").on("click",".fluid.card .image",function(){$('.ui.star.rating').rating();$('.fluid.card .image').dimmer({on:'hover'});});$('.menu .item').tab();$('.special.cards .image').dimmer({on:'hover'});});if(setting.pjax=="1"){$.getScript("//cdn.staticfile.org/semantic-ui/2.4.1/semantic.min.js",function(){$('.ui.search').search({apiSettings:{url:'/index.php/jsonapi/getarticle?keyword={query}',},fields:{results:'items',title:'article',url:'url',description:'description'},error:{serverError:'服务器错误，请重试',},minCharacters:1,maxResults:9999999999999999,showNoResults:false,onSelect(result,response){return false;}});});}else if(setting.pjax=="2"){$.getScript("//cdn.staticfile.org/semantic-ui/2.4.1/semantic.min.js",function(){$('.ui.search').search({apiSettings:{url:'/index.php/jsonapi/getarticle?keyword={query}',},fields:{results:'items',title:'article',url:'url',description:'description'},error:{serverError:'服务器错误，请重试',},minCharacters:1,maxResults:9999999999999999,showNoResults:false,});});}if(setting.Login_hidden=='true'){$(function(){$("#loginbtn").click(function(){setTimeout(function(){window.location.reload();},2000);});});$.getScript("//cdn.staticfile.org/semantic-ui/2.3.2/components/modal.min.js",function(){$("#bs-login").click(function(){$('.mini.modal.login').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}if(setting.RewardOpenAlipay=='true'){$(function(){$("#bs-alipay").click(function(){$('.mini.modal.alipay').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}if(setting.Sharewechat=='true'){$(function(){$("#wechatshare").click(function(){$('.mini.modal.wechatshare').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}if(setting.RewardOpenWechat=='true'){$(function(){$("#bs-wechat").click(function(){$('.mini.modal.wechat').modal({centered:true,closable:true,onDeny:function(){},}).modal('show');});});}if(setting.Wechat_qrcode_status=='true'){$('.wechat.icon.circular.link').on('click',function(){layer.open({type:1,area:['330px','330px'],title:'加我微信',shadeClose:true,content:'<center><div style="margin-top:15px"></div><img width="255" height="255" src="'+setting.Wechat_qrcode+'"></center>'});});}if(setting.QQ_qrcode_status=='true'){$('.qq.icon.circular.link').on('click',function(){layer.open({type:1,area:['330px','330px'],title:'加我QQ',shadeClose:true,content:'<center><div style="margin-top:15px"></div><img width="255" height="255" src="'+setting.QQ_qrcode+'"></center>'});});}if(setting.Share=='true'){var title=$(document.head).find("[name=title], [name=Title]").attr("content")||document.title;var url=window.location.href;var domain=window.location.origin;var imgurl=$("img:first").prop("data-src")||$("img:first").prop("src");var description=$(document.head).find("[name=description], [name=Description]").attr("content")||"";var source=$(document.head).find("[name=site], [name=Site]").attr("content")||document.title;$('#qqshare').on('click',function(){window.open('http://connect.qq.com/widget/shareqq/index.html?url='+url+'&title='+title+'&source='+source+'&desc='+description+'&pics='+imgurl);});$('#qzoneshare').on('click',function(){window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url='+url+'&title='+title+'&site='+source+'&desc='+description+'&summary='+description+'&pics='+imgurl);});if(setting.Sharewechat=='true'){$.getScript("//cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js",function(){jQuery('#qrcode').qrcode({text:url});});}$('#weiboshare').on('click',function(){window.open('http://service.weibo.com/share/share.php?url='+url+'&title='+title+'&pic='+imgurl+'&appkey=');});$('#facebookshare').on('click',function(){window.open('https://www.facebook.com/sharer/sharer.php?u='+url+'&title='+title+'&source='+source+'&desc='+description+'&link='+url+'&captain=&picture='+imgurl);});$('#twittershare').on('click',function(){window.open('https://twitter.com/intent/tweet?text='+title+'&url='+url+'&via='+domain);});$('#googleshare').on('click',function(){window.open('https://plus.google.com/share?url='+url);});$('#linkedinshare').on('click',function(){window.open('http://www.linkedin.com/shareArticle?mini=true&ro=true&title='+title+'&url='+title+'&summary='+description+'&source='+source+'&armin=armin');});}if(setting.Translate=='1'){if(setting.TranslateLanguage=='1'){var TranslateLanguage=2;}else{var TranslateLanguage=1;};$.getScript(setting.import2+"modules/tw_cn.js",function(){var defaultEncoding=TranslateLanguage;var translateDelay=0;var cookieDomain=setting.siteUrl;var msgToTraditionalChinese="繁体";var msgToSimplifiedChinese="简体";var translateButtonId="translateLink";translateInitilization();});}localStorage.setItem("fontsize","default");$('#fontsizes').click(function(){switch(localStorage.getItem("fontsize")){case'default':localStorage.setItem("fontsize","18");$(".post-content").animate({"font-size":"18px"});break;case'18':localStorage.setItem("fontsize","25");$(".post-content").animate({"font-size":"25px"});break;case'25':localStorage.setItem("fontsize","32");$(".post-content").animate({"font-size":"32px"});break;default:localStorage.setItem("fontsize","default");$(".post-content").animate({"font-size":"15px"});}});$('.ui.equal.width.form').on('click','#randname',function(){const b=["大名鼎鼎","躲闪","骄傲","挺胸","不知名","知名","刚下飞机","看透一切","小有名气","潜心学习","生龙活虎","生气勃勃","说话诙谐","说话风趣","妙趣横生","妙语连珠","挤眉弄眼","天真活泼","天真烂漫","天真无邪","稚气未脱","聪明伶俐","机智灵巧","心灵手巧","能说会道","无忧无虑","无拘无束","开朗大方","幽默风趣","逗人发笑","憨直可爱","性格爽直","性格豪爽","直截了当","直言相告","直言不讳","有口无心","快嘴快舌","直抒已见","令人捧腹","饶有风趣","趣味盎然","心直口快","快人快语"],c=["大黄","匿名人士","男士","女士","人士","男孩","女孩","贫僧","道士","学生","打工人","少侠","白领","蓝领","小学生","初中生","高中生","大学生","研究生","博士生","教授"];var randname=b[Math.floor(Math.random()*b.length)]+"的"+c[Math.floor(Math.random()*c.length)];document.getElementById('author').value=randname;});if(setting.Like=='true'){$('#agree-btn').on('click',function(){if(localStorage.getItem("cid"+$('#agree-btn').attr('data-cid'))=='like=true'){toastr.warning('啊哦，您已经点赞过惹~');}else{$.ajax({type:'post',url:setting.getPostLikeFile,data:'agree='+$('#agree-btn').attr('data-cid'),async:true,timeout:30000,cache:false,success:function(data){json=JSON.parse(data);if(json.code==2){toastr.warning('点赞失败，检测到来源错误，请稍后再试~');}else{$('.agreenum').html(json.agree);localStorage.setItem("cid"+$('#agree-btn').attr('data-cid'),'like=true');toastr.success('点赞成功~');}},error:function(){toastr.warning('啊哦，点赞失败~');},});}});}if(setting.CommentLike=='true'){$('.like.thumbs.up.red.link.icon').on('click',function(){if(localStorage.getItem("coid"+$(this).attr('data-coid'))=='like=true'){toastr.warning('啊哦，您已经点赞过惹~');}else{$.ajax({type:'post',url:setting.getCommentLikeFile,data:{agree:$(this).attr('data-coid'),},async:true,timeout:30000,cache:false,success:function(data){json=JSON.parse(data);if(json.code==2){toastr.warning('点赞失败，检测到来源错误，请稍后再试~');}else{$('.agreenumcomment'+json.coid).html(json.agree);localStorage.setItem("coid"+json.coid,'like=true');toastr.success('点赞成功~');}},error:function(){toastr.warning('啊哦，点赞失败~');},});}});}return this}})}(jQuery));